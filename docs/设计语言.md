<!--
 * @Author: your name
 * @Date: 2021-09-01 20:04:55
 * @LastEditTime: 2021-09-10 15:30:39
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: /stonelang_ts/docs/设计语言.md
-->
设计一个脚本语言stone , 需要哪些语法功能:

- 整数四则运算
- 支持字符串处理
- 对变量提供支持(不然和计算器没区别了), 用户可以将变量任意赋值为整数或字符串
- 支持条件语句 if  while
- 姑且算脚本语言，　所以可以不需要指定静态数据类型，　用户使用时也不必事先声明变量
- 强制使用分号在句末，如果正巧换行，分号可省略
- 不支持类似java语言中return 功能
- Stone语言为了简化语法，省去了if语句和while语句的条件表达式两侧的括号, 并允许用户省略可以省略的句尾分号
- 如果同一行中写多个语句，不能省略分号
- {}括起来的代码块最后一条语句的分号可以省略
- 空行被视为一句空语句，只不过省略了句尾的分号
  

示例:

```
// 这段程序是计算1至9这9个数字的和，并输出
sum = 0
i = 1 
while i < 10 {
    sum = sum + i
    i = i +1
}
sum // 最后一行只写了sum, Stone语言会将变量sum也视为一条语句,该语句将读取变量sum的值
```

示例2 
```
// 使用if语句, 分别计算其中奇数与偶数的和, 最后再将两者相加
even = 0
odd = 0
i = 1
while i < 10 {
    if i % 2 == 0 { // 如果是偶数
        even = even + i
    } else {
        odd = odd +i
    }
    i = i +1
}

even + odd 
```

# 一、词法分析器(lexical analyzer, lexer or scanner):  分割单词

> 词法分析：　程序的源代码是一种相连的长字符串, 这样的长字符串很难处理，　语言处理器通常先将字符串中的字符以单词为单位分组，　切割成多个字符串。　


## token对象

词法分析的结果称为单词(token),词法分析将筛选出程序的解释与执行必须的成分，单词之间的空白或者注释会在这一阶段被去除掉

词法分析器将把程序源代码视作字符串，并将它分割成若干单词。 分割后得到的单词并不是简单地用`String`对象表示，而是用下面这种Token对象，它将

- 记录单词对应的字符串
- 保存单词的类型
- 单词所处位置的行号等信息

![](../docs/assets/abstract_token_class.png)


Token类根据单词的类型， 又定义了不同的子类：(这里只把单词的种类限定为3种)

- stone语言包含`标识符 ` -->  Class NumToken 
- stone语言包含`整形字面量 ` --> Class  IdToken
- stone语言包含`字符串字面量 `--> Class  StringToken




